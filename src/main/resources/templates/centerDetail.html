<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="UTF-8" />
    <title>Trang chủ</title>
    <link rel="stylesheet" href="/css/centerDetail.css" />
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v6.5.2/js/all.js"></script>
    <script src="/js/centerDetail.js"></script>
</head>

<body>
<div class="main_container">
    <section id="content">
        <!-- MAIN -->
        <main>
            <div class="head-title">
                <div class="left">
                    <h1>Chi tiết trung tâm A</h1>
                    <div class="runline">
                        <p>Hôm nay là:
                            <span id="currentDate"></span>
                        </p>
                    </div>
                </div>
            </div>

            <ul class="box-info">
                <li>
                    <i class="bx bxs-calendar-check">
                        <i class="fa-solid fa-graduation-cap" aria-hidden="false"></i>
                    </i>
                    <span class="text">
              <a href="/qlhv">
                <h3>1020</h3>
                <p>Học viên</p>
              </a>
            </span>
                </li>
                <li>
                    <i class='bx bxs-group'>
                        <i class="fa-solid fa-person-chalkboard"></i>
                    </i>
                    <span class="text">
              <a href="/qlgv">
                <h3>2834</h3>
                <p>Giáo viên</p>
              </a>
            </span>
                </li>
                <li>
                    <i class='bx bxs-dollar-circle'>
                        <i class="fa-solid fa-layer-group"></i>
                    </i>
                    <span class="text">
              <h3>2543</h3>
              <p>Khoá học</p>
            </span>
                </li>
            </ul>
            <!-- Edit Description Modal -->
            <div id="editDescriptionModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeEditModal()">&times;</span>
                    <h2>Chỉnh sửa mô tả trung tâm</h2>
                    <textarea id="descriptionInput" rows="6" cols="50"></textarea>
                    <button onclick="saveDescription()">Lưu</button>
                </div>
            </div>
            <!-- Start: DELETE TOAST -->

            <div class="table-data">
                <div class="order">
                    <div class="head">
                        <h3>Mô tả trung tâm</h3>
                        <button onclick="editDescription()">
                            <i class="fa-solid fa-pencil"></i>Chỉnh sửa mô tả
                        </button>
                        <button onclick="openDeleteModal()">
                            <a class="delete-user"><i class="fas fa-trash"></i></a> Xoá trung tâm
                        </button>
                        <!-- cảm giác nút này thừa thải -->
                    </div>
                    <div class="description" id="centreDescription">
                        <p>Chào mừng bla bla đến với ...</p>
                    </div>
                </div>
            </div>
        </main>
    </section>
</div>
<!--  -->

</div>
</main>
<!-- MAIN -->
</section>
</div>
<!-- Delete Modal -->


<div id="deleteModal" class="modal">
    <div class="modal-content">
        <p>Bạn có chắc chắn muốn xóa trung tâm <span id="centerName"></span>?</p>
        <button id="confirmDelete" onclick="deleteCenter()">Xác nhận</button>
        <button id="cancelDeleteButton" onclick="closeDeleteModal()">Huỷ</button>
        <!-- nên css lại nút xác nhân vs huỷ cách xa xa ra -->
    </div>
</div>

<script src="/js/centerDetail.js" type="module"></script>

<!-- getCurrentDate -->
<script>
    document.getElementById("currentDate").innerText = getCurrentDate();
    function getCurrentDate() {
      var currentDate = new Date();
      var dayOfWeek = ['Chủ Nhật', 'Thứ Hai', 'Thứ Ba', 'Thứ Tư', 'Thứ Năm', 'Thứ Sáu', 'Thứ Bảy'];
      var day = String(currentDate.getDate()).padStart(2, "0");
      var month = String(currentDate.getMonth() + 1).padStart(2, "0");
      var year = currentDate.getFullYear();
      var dayIndex = currentDate.getDay();
      var dayName = dayOfWeek[dayIndex];
      return dayName + ", " + day + "-" + month + "-" + year + " ";
    };
</script>

<!-- edit modal up -->
<script>
    // Open edit description modal
    function editDescription() {
      const descriptionModal = document.getElementById('editDescriptionModal');
      const descriptionInput = document.getElementById('descriptionInput');
      const currentDescription = document.getElementById('centreDescription').textContent;
      descriptionInput.value = currentDescription.trim();
      descriptionModal.style.display = 'block';
    }

    // Close edit description modal
    function closeEditModal() {
      const descriptionModal = document.getElementById('editDescriptionModal');
      descriptionModal.style.display = 'none';
    }

    // Save edited description
    function saveDescription() {
      const descriptionModal = document.getElementById('editDescriptionModal');
      const descriptionInput = document.getElementById('descriptionInput');
      const newDescription = descriptionInput.value;
      document.getElementById('centreDescription').innerHTML = `<p>${newDescription}</p>`;
      descriptionModal.style.display = 'none';
    }
</script>

<!-- delete center -->
<script>
    // modal-show-up
    function openDeleteModal() {
      const deleteModal = document.getElementById('deleteModal');
      deleteModal.style.display = 'block';
    }

    // Close
    function closeDeleteModal() {
      const deleteModal = document.getElementById('deleteModal');
      deleteModal.style.display = 'none';
    }

    // Deletion
    function deleteCenter() {
      const centerName = document.getElementById('centerName').textContent;
      // Perform delete operation here
      // After successful deletion, you can display a toast or perform any other action
      showToast('Xóa thành công trung tâm ' + centerName);
      closeDeleteModal();
    }

    // Show toast message
    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => {
        toast.classList.add('show');
      }, 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
          document.body.removeChild(toast);
        }, 300);
      }, 3000);
    }
</script>

</body>

</html>