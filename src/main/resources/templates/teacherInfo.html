<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">


<head>
    <meta charset="UTF-8" />
    <title>Trang chủ</title>
    <link rel="stylesheet" href="/css/teacherManagement.css" />
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v6.5.2/js/all.js"></script>
    <script src="/js/teacherManagement.js"></script>
    <style>

    </style>
</head>

<body>
<div class="main_container">
    <section id="content">
        <!-- MAIN -->
        <main>
            <div class="head-title">
                <div class="left">
                    <h1>Sơ yếu lí lịch</h1>
                    <div class="runline">
                        <p>Hôm nay là:
                            <span id="currentDate"></span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Edit Description Modal -->
            <div id="editDescriptionModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeEditModal()">&times;</span>
                    <h2>Chỉnh sửa mô tả trung tâm</h2>
                    <textarea id="descriptionInput" rows="6" cols="50"></textarea>
                    <button onclick="saveDescription()">Lưu</button>
                </div>
            </div>
            <!-- Start: DELETE TOAST -->

            <div class="table-data">
                <div class="order">
                    <div class="head">
                        <h3>Thông tin cơ bản</h3>
                        <button onclick="openDeleteModal()">
                            <a class="delete-user"><i class="fas fa-trash"></i></a> Xoá</button>
                    </div>
                    <form id="myForm">
                        <label>Địa chỉ:</label><br>
                        <div id="address" name="address"></div><br><br>

                        <label>Khoá học:<span id="courseLabel"></span></label><br>
                        <div id="course" name="course"></div><br><br>

                        <label>Feedback:<span id="feedbackLabel"></span></label><br>
                        <div id="feedback" name="feedback"></div><br><br>

                        <label>Lương:<span id="salaryLabel"></span></label><br>
                        <div id="salary" name="salary"></div><br><br>

                        <button id="scheduleButton" type="button">Lịch dạy</button><br><br>
                    </form>
                </div>
            </div>
        </main>
    </section>
</div>
<!--  -->

</div>
</main>
<!-- MAIN -->
</section>
</div>
<!-- Delete Modal -->


<div id="deleteModal" class="modal">
    <div class="modal-content">
        <p>Bạn có chắc chắn muốn xoá giáo viên <span id="teacherName"></span>?</p>
        <button id="confirmDelete" onclick="deleteCenter()">Xác nhận</button>
        <button id="cancelDeleteButton" onclick="closeDeleteModal()">Huỷ</button>
        <!-- nên css lại nút xác nhân vs huỷ cách xa xa ra -->
    </div>
</div>

<script src="/js/teacherManagement.js" type="module"></script>

<!-- getCurrentDate -->
<script>
    document.getElementById("currentDate").innerText = getCurrentDate();

    function getCurrentDate() {
      var currentDate = new Date();
      var day = String(currentDate.getDate()).padStart(2, '0');
      var month = String(currentDate.getMonth() + 1).padStart(2, '0');
      var year = currentDate.getFullYear();
      return day + '-' + month + '-' + year;
    };
</script>

<!-- edit modal up -->
<script>
    // Open edit description modal
    function editDescription() {
      const descriptionModal = document.getElementById('editDescriptionModal');
      const descriptionInput = document.getElementById('descriptionInput');
      const currentDescription = document.getElementById('centreDescription').textContent;
      descriptionInput.value = currentDescription.trim();
      descriptionModal.style.display = 'block';
    }

    // Close edit description modal
    function closeEditModal() {
      const descriptionModal = document.getElementById('editDescriptionModal');
      descriptionModal.style.display = 'none';
    }

    // Save edited description
    function saveDescription() {
      const descriptionModal = document.getElementById('editDescriptionModal');
      const descriptionInput = document.getElementById('descriptionInput');
      const newDescription = descriptionInput.value;
      document.getElementById('centreDescription').innerHTML = `<p>${newDescription}</p>`;
      descriptionModal.style.display = 'none';
    }
</script>

<!-- delete center -->
<script>
    // modal-show-up
    function openDeleteModal() {
      const deleteModal = document.getElementById('deleteModal');
      deleteModal.style.display = 'block';
    }

    // Close
    function closeDeleteModal() {
      const deleteModal = document.getElementById('deleteModal');
      deleteModal.style.display = 'none';
    }

    // Deletion
    function deleteCenter() {
      const teacherName = document.getElementById('teacherName').textContent;
      // Perform delete operation here
      // After successful deletion, you can display a toast or perform any other action
      showToast('Xoá thành công giáo viên ' + teacherName);
      closeDeleteModal();
    }

    // Show toast message
    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => {
        toast.classList.add('show');
      }, 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
          document.body.removeChild(toast);
        }, 300);
      }, 3000);
    }
</script>

<!-- final script -->
<script>
    // Điều hướng - để tạm để có thứ show lên - btw, chưa css ổn chỉ tạm thời
    document.getElementById("scheduleButton").addEventListener("click", function () {
      window.location.href = "/ttgv";
    });

</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
      const filteredUserList = [
        {
          name: "John Doe",
          address: "123 Main Street",
          phoneNumber: "0123456789",
          teachingSubject: "Maths",
          id: 1,
          salary: 400,
          salaryCoefficient: 1.0,
          gender: "Male",
          status: 1,
        },
        {
          name: "Jane Smith",
          address: "456 Elm Street",
          phoneNumber: "9876543210",
          teachingSubject: "English",
          id: 2,
          salary: 500,
          salaryCoefficient: 1.0,
          gender: "Female",
          status: 1
        },
        {
          name: "Administrator",
          address: "789 High Avenue",
          phoneNumber: "1239876540",
          teachingSubject: "Literature",
          id: 3,
          salary: 600,
          salaryCoefficient: 1.0,
          gender: "Male",
          status: 1
        },
        {
          name: "Administrator",
          address: "789 High Avenue",
          phoneNumber: "1239876540",
          teachingSubject: "Physics",
          id: 4,
          salary: 400,
          salaryCoefficient: 1.0,
          gender: "Male",
          status: 1
        }
      ];

      // chưa lấy được theo nút bấm xem của từng người -> xử lí sau
      const user = filteredUserList[0];

      // Điền dữ liệu vào các trường của form
      document.getElementById("address").textContent = user.address;
      document.getElementById("course").textContent = user.teachingSubject;
      document.getElementById("salary").textContent = `${user.salary}.000 VND`;
      document.getElementById("feedback").textContent = user.phoneNumber;
    });

</script>

</body>

</html>